# render.yaml â€” Real-Time ML Pipeline on Render
# Simplified single-service architecture
# Uses mock Kafka for demo purposes (no external dependencies needed)

services:
  # All-in-one service: runs producer, consumers, trainer, and dashboard
  - type: web
    name: ml-pipeline-dashboard
    runtime: docker
    plan: starter
    dockerfilePath: Dockerfile
    dockerCommand: bash start_all.sh
    envVars:
      - key: PYTHONUNBUFFERED
        value: "1"
      - key: USE_MOCK_KAFKA
        value: "true"
      - key: KAFKA_BOOTSTRAP
        value: localhost:9092
      - key: KAFKA_TOPIC
        value: energuide-events
    healthCheckPath: /
    disk:
      name: pipeline-data
      mountPath: /app/data
      sizeGB: 1
